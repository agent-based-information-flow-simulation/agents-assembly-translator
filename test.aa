message fakenews
    prm num_photos, float
emessage

message fakenews_response
    prm num_seen_photos, float
emessage

agent test_agent
    prm susceptability, float, init, 20
    prm friends, list, conn_list
    prm friends_msgs, list, msg_list

    behav runs_on_start, setup
        action modify_susceptability, modify_self
            add susceptability, 15
        eaction
    ebehav

    behav runs_once_after_delay, one_time, 5
        action modify_susceptability, modify_self
            mult susceptability, 15
        eaction
    ebehav

    behav runs_indefinately, cyclic, 0, 20
        action spread_fakenews, send_msg, fakenews, query
            set num_photos, 100
            send friends
        eaction
    ebehav

    behav runs_on_msg_received, msg_rcv, fakenews, query
        action send_fakenews_response, send_msg, fakenews_response, query
            decl num_received_photos, 0
            get num_received_photos, num_photos
            subt num_received_photos, 10
            set num_seen_photos, num_received_photos
            send sender
        eaction

        action modify_susceptability, modify_self
            mult susceptability, 3.5
        eaction
    ebehav
eagent
